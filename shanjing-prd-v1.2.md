# 山径APP - 产品需求文档（PRD v1.2）

> **文档版本**: v1.2  
> **最后更新**: 2026-02-27  
> **文档状态**: 评审完成  
> **基于版本**: v1.1 优化

---

## 1. 产品概述

### 1.1 一句话描述
**城市年轻人的轻度徒步向导** - 发现路线、离线导航、记录分享，让每一次出走都轻松安心。

### 1.2 核心价值主张

| 维度 | 描述 | 优先级 |
|------|------|--------|
| **功能性** | 精准、易用的离线导航，告别迷路焦虑 | P0 |
| **情感性** | 诗意、雅致的户外体验，满足"低成本逃离" | P1 |
| **安全性** | 专为女性设计的安心保障机制 | P0 |
| **社交性** | 一键生成分享内容，让记录和传播零门槛 | P2 |

### 1.3 目标用户画像

**核心用户**（Primary Persona）
- **年龄**: 25-32岁
- **性别**: 女性为主（60%+）
- **职业**: 一二线城市白领
- **场景**: 周末1天往返，5-10km轻度徒步，1-3人小团体
- **痛点排序**: 
  1. 怕迷路（P0）
  2. 找不到靠谱路线（P0）
  3. 担心安全问题（P0）
  4. 分享麻烦（P1）
- **关键特征**: 
  - 手机依赖度高
  - 安全意识强
  - 审美要求高
  - 不愿学习复杂操作

**次要用户**（Secondary Persona）
- 情侣/朋友结伴出行
- 亲子家庭（周末轻户外）
- 摄影爱好者

---

## 2. 产品架构

### 2.1 功能模块架构

```
山径APP
├── 📍 发现 (Discovery)
│   ├── 路线推荐
│   │   ├── 离我最近（基于位置）
│   │   └── 编辑精选（3-5条高质量）
│   ├── 路线搜索
│   │   ├── 位置筛选（城市/距离）
│   │   ├── 难度筛选（休闲/轻度/进阶）
│   │   └── 标签筛选（亲子/宠物/摄影）
│   └── 路线详情
│       ├── 头图轮播（3-5张）
│       ├── 基础信息（距离/时长/爬升/难度）
│       ├── 安全信息（女性友好度/信号覆盖/下撤点）
│       ├── 轨迹预览（地图+海拔剖面）
│       ├── POI列表（起点/观景点/卫生间/补给点/终点）
│       └── 操作按钮（下载/导航/分享/收藏）
│
├── 🧭 导航 (Navigation) - 核心模块
│   ├── 离线地图
│   │   ├── 按路线下载（周边500m，14-15级精度）
│   │   ├── 自动缓存管理（30天过期清理）
│   │   └── 存储大小预估（5-20MB/路线）
│   ├── 实时导航
│   │   ├── 轨迹跟随（GPS点匹配路线）
│   │   ├── 偏航检测（>30m提醒，>50m重新规划）
│   │   ├── 方向指引（箭头+文字）
│   │   ├── 语音播报（关键路口提前50m）
│   │   └── 进度显示（距离/海拔/ETA）
│   ├── 路口指引
│   │   └── 关键节点实景照片对比
│   └── 安全功能
│       ├── 行程分享卡片（微信分享）
│       ├── 定时安全提醒（每30分钟震动）
│       └── SOS一键求救（发送位置给紧急联系人）
│
├── 📝 记录 (Recording) - M2开放
│   ├── 轨迹记录
│   │   ├── 开始/暂停/结束
│   │   ├── 后台持续记录
│   │   └── 异常退出自动保存
│   ├── 照片标记
│   │   ├── 拍照自动关联GPS
│   │   └── 相册导入匹配
│   └── 数据回顾
│       ├── 基础数据（里程/时长/速度/卡路里）
│       ├── 海拔数据（爬升/最高海拔/剖面图）
│       └── 照片墙
│
├── 👥 社区 (Community) - M2开放
│   ├── 动态流
│   │   ├── 推荐（算法排序）
│   │   └── 附近（地理位置）
│   ├── 内容发布
│   │   ├── 一键生成（自动选图+模板+数据）
│   │   ├── 手动编辑
│   │   └── 隐私设置
│   └── 互动
│       ├── 点赞/评论/收藏
│       └── 分享（生成分享图）
│
└── 👤 我的 (Profile)
    ├── 个人主页（简化版M1）
    ├── 收藏路线
    ├── 离线包管理
    ├── 紧急联系人设置（1-3位）
    └── 设置（账号/通知/关于/帮助）
```

### 2.2 技术架构

| 层级 | 技术选型 | 理由 |
|------|----------|------|
| **客户端** | Flutter | 双端一套代码，性能优先 |
| **后端** | Node.js + PostgreSQL + Redis | MVP开发快，生态成熟 |
| **地图服务** | 高德SDK | 阿里系便于沟通，国内数据准，支持北斗双模 |
| **存储** | OSS | 图片/轨迹文件存储 |
| **推送** | 极光推送 | 国内稳定，支持离线场景 |

---

## 3. 用户故事与验收标准

### 3.1 M1 核心用户故事

#### US-001: 作为用户，我可以浏览附近的徒步路线
**优先级**: P0  
**验收标准**:
- [ ] 首页显示"离我最近"路线列表
- [ ] 路线卡片展示：缩略图、名称、距离、难度标签、预计时长
- [ ] 支持下拉刷新
- [ ] 列表加载时间 < 2秒
- [ ] 无网络时显示缓存数据+离线提示

#### US-002: 作为用户，我可以查看路线详情
**优先级**: P0  
**验收标准**:
- [ ] 头图轮播支持3-5张高清图片
- [ ] 显示基础信息：距离/时长/爬升/难度
- [ ] 显示安全信息：女性友好标识、信号覆盖提示、紧急下撤点
- [ ] 轨迹预览地图可缩放、显示海拔剖面图
- [ ] POI列表包含：起点、观景点、卫生间、补给点、终点
- [ ] 页面加载时间 < 3秒

#### US-003: 作为用户，我可以下载路线离线包
**优先级**: P0  
**验收标准**:
- [ ] 下载按钮显示预估大小（5-20MB）
- [ ] 支持断点续传
- [ ] 下载进度实时显示
- [ ] 下载完成后可离线查看地图和轨迹
- [ ] 存储空间不足时提示清理

#### US-004: 作为用户，我可以在无网络环境下使用导航
**优先级**: P0  
**验收标准**:
- [ ] 离线地图加载时间 < 2秒
- [ ] GPS定位精度 < 10米
- [ ] 轨迹跟随：用户位置实时显示在路线上
- [ ] 偏航检测：偏离>30m时提醒，>50m时提示重新规划
- [ ] 方向指引：箭头+文字"向前/左转/右转"
- [ ] 语音播报：关键路口提前50m播报
- [ ] 进度显示：已走/剩余距离、当前海拔、预计到达时间

#### US-005: 作为用户，我可以设置紧急联系人
**优先级**: P0  
**验收标准**:
- [ ] 支持添加1-3位紧急联系人
- [ ] 联系人信息：姓名、手机号
- [ ] 导航前提醒确认紧急联系人
- [ ] 联系人数据加密存储

#### US-006: 作为用户，我可以在紧急情况下发送SOS
**优先级**: P0  
**验收标准**:
- [ ] 导航页面显示明显的SOS按钮
- [ ] 点击SOS后发送当前GPS位置给所有紧急联系人
- [ ] 发送方式：短信+推送（有网络时）
- [ ] 发送成功后显示确认提示
- [ ] 误触防护：二次确认弹窗

#### US-007: 作为用户，我可以分享行程给好友
**优先级**: P1  
**验收标准**:
- [ ] 生成包含路线信息的分享卡片
- [ ] 卡片包含：路线名称、缩略图、预计时长、我的实时位置（可选）
- [ ] 支持分享到微信
- [ ] 接收方无需安装APP可查看基本信息

#### US-008: 作为用户，我可以使用微信登录
**优先级**: P0  
**验收标准**:
- [ ] 支持微信一键登录
- [ ] 首次登录自动创建用户账号
- [ ] 登录状态持久化（7天免登录）
- [ ] 支持退出登录

---

### 3.2 M2 用户故事（规划）

#### US-101: 作为用户，我可以记录自己的徒步轨迹
**优先级**: P1  
**验收标准**:
- [ ] 明显的开始/暂停/结束按钮
- [ ] 后台持续记录GPS轨迹
- [ ] 锁屏状态下继续记录
- [ ] 异常退出自动保存已记录部分
- [ ] 记录频率：每秒1点

#### US-102: 作为用户，我可以发布徒步动态
**优先级**: P1  
**验收标准**:
- [ ] 一键生成分享图（自动选图+模板+数据叠加）
- [ ] 支持手动编辑：选图、排序、配文、加标签
- [ ] 隐私设置：公开/仅关注/私密
- [ ] 发布后出现在动态流

---

## 4. 非功能需求

### 4.1 性能需求

| 指标 | 目标值 | 测试方法 |
|------|--------|----------|
| 冷启动时间 | < 3秒 | 从点击图标到首页渲染完成 |
| 离线地图加载 | < 2秒 | 从点击到地图完全显示 |
| 导航定位精度 | < 10米 | 与标准GPS对比 |
| 轨迹记录频率 | 1点/秒 | 后台持续记录不丢点 |
| API响应时间 | < 500ms | 95%请求 |
| 页面加载时间 | < 3秒 | 路线详情页完整加载 |

### 4.2 可靠性需求

| 场景 | 要求 |
|------|------|
| 无网络环境 | 离线功能完全可用（已下载路线） |
| 弱GPS信号 | 惯导补偿，轨迹不中断 |
| 电量低（<20%） | 弹窗提醒+自动进入省电模式（降低GPS频率） |
| 异常退出 | 自动保存进度，下次启动提示恢复 |
| 存储空间不足 | 提示清理旧离线包 |

### 4.3 安全需求

| 功能 | 要求 |
|------|------|
| 用户数据加密 | 敏感信息（手机号、紧急联系人）加密存储 |
| 位置隐私 | 用户位置仅用于导航，不上传服务器（除非主动分享） |
| 传输安全 | 所有API使用HTTPS |
| SOS功能 | 必须可靠，发送失败时重试3次 |

### 4.4 定位优化（北斗+GPS双模）

| 功能 | 说明 |
|------|------|
| 双模检测 | 启动时检测手机北斗+GPS支持 |
| 智能切换 | 支持双模则启用双模融合定位 |
| 精度优化 | 密林/峡谷场景专项优化 |
| 品牌话术 | "北斗+GPS双模，专为国内山野优化" |

---

## 5. 里程碑规划

### Milestone 1: MVP（10-12周）

**目标**: 交付可内测的MVP，验证核心价值：**离线导航让徒步不迷路**

| 模块 | 功能范围 | 优先级 |
|------|----------|--------|
| 发现 | 路线列表、详情、基础筛选（地点/距离/难度） | P0 |
| 导航 | 离线地图、轨迹跟随、偏航提醒、语音播报 | P0 |
| 安全 | 紧急联系人、SOS、行程分享卡片 | P0 |
| 用户 | 微信登录 | P0 |
| 数据 | 10条杭州精品路线 | P0 |

**成功标准**:
1. 30名种子用户中，70%能顺利完成徒步不迷路
2. 安全功能（SOS、行程分享）100%可用
3. 离线导航准确率 > 95%
4. 用户NPS评分 > 50

**产出**: Android内测版APP + 10条精品路线数据

---

### Milestone 2: 记录+社区（6-8周）

**目标**: 完善用户体验，建立内容生态

| 模块 | 功能范围 | 优先级 |
|------|----------|--------|
| 记录 | 轨迹记录、数据回顾、照片标记 | P1 |
| 社区 | 动态流、发布、互动、一键生成分享图 | P1 |
| 用户 | 手机号绑定、完整个人中心 | P1 |
| 后台 | 运营后台支持路线采集（录制模式） | P1 |
| 数据 | 扩展至50条路线，开放UGC审核 | P1 |

**产出**: 可公测版本

---

### Milestone 3: 规模化（6-8周）

**目标**: 产品成熟，验证商业模式

| 模块 | 功能范围 | 优先级 |
|------|----------|--------|
| 导航 | 路口AR指引、智能路线推荐 | P2 |
| 社区 | 关注系统、话题标签、活动功能 | P2 |
| 商业化 | 会员功能、装备推荐 | P2 |

**产出**: V1.0正式版

---

## 6. 待决策事项

| 事项 | 选项 | 建议 | 决策期限 |
|------|------|------|----------|
| M1路线来源 | 自采 / 合作 / 购买 | 自采10条核心路线 | Week 2 |
| 语音播报TTS | 系统TTS / 第三方 / 预录音 | 系统TTS（成本低） | Week 4 |
| 分享卡片设计 | 简约 / 丰富 / 可配置 | 简约为主，突出数据 | Week 3 |

---

## 7. 已确定事项

| 事项 | 决策 | 理由 |
|------|------|------|
| 地图服务 | **高德SDK** | 阿里系便于沟通，国内数据准，支持北斗双模 |
| 技术栈 | **Flutter** | 双端一套，性能优先 |
| 首发平台 | **Android** | MVP方便安装测试 |
| 后端技术 | **Node.js** | MVP够用，开发快 |
| 用户系统 | **微信登录优先** | 便捷+留存，M2再诱导绑定手机号 |
| M1路线数 | **10条** | 降低风险，聚焦验证 |
| 核心原则 | **安全第一** | 女性用户的安心感是留存关键 |

---

## 8. 附录

### 8.1 术语表

| 术语 | 解释 |
|------|------|
| POI | Point of Interest，兴趣点，如观景点、卫生间等 |
| GPS | Global Positioning System，全球定位系统 |
| 偏航 | 用户实际位置偏离规划路线 |
| ETA | Estimated Time of Arrival，预计到达时间 |
| UGC | User Generated Content，用户生成内容 |
| TTS | Text to Speech，文本转语音 |

### 8.2 参考竞品

- **两步路**: 功能全面但复杂，UGC为主质量参差
- **六只脚**: 老牌工具，界面老旧
- **AllTrails**: 国外标杆，体验好但国内数据不足
- **Strava**: 运动社交，偏重跑步骑行

### 8.3 更新日志

| 版本 | 日期 | 变更内容 |
|------|------|----------|
| v1.0 | - | 初版PRD |
| v1.1 | - | 细化用户画像，增加安全功能，调整M1范围 |
| v1.2 | 2026-02-27 | 按PRD技能规范重构，增加用户故事与验收标准，优化架构描述 |

---

> **"安全第一，体验第二，功能第三"** - 女性用户的安心感是留存关键
