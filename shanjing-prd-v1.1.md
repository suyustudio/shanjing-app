# 山径APP - 产品需求文档（PRD v1.1）

## 1. 产品概述

### 1.1 一句话描述
**城市年轻人的轻度徒步向导** - 发现路线、离线导航、记录分享，让每一次出走都轻松安心。

### 1.2 核心价值主张
| 维度 | 描述 |
|------|------|
| **功能性** | 精准、易用的离线导航，告别迷路焦虑 |
| **情感性** | 诗意、雅致的户外体验，满足"低成本逃离" |
| **社交性** | 一键生成分享内容，让记录和传播零门槛 |
| **安全性** | 专为女性设计的安心保障机制 |

### 1.3 目标用户（已细化）
- **核心**: 25-32岁一二线城市白领，女性为主（60%+）
- **场景**: 周末1天往返，5-10km轻度徒步，1-3人小团体
- **痛点排序**: 怕迷路 > 找不到靠谱路线 > 分享麻烦
- **关键特征**: 手机依赖度高、安全意识强、审美要求高、不愿学习复杂操作

---

## 2. 产品架构

### 2.1 功能模块

```
山径APP
├── 发现
│   ├── 路线推荐（编辑精选/离我最近）
│   ├── 路线搜索（地点/距离筛选）
│   └── 路线详情（图文/轨迹/POI/安全信息）
├── 导航（核心）
│   ├── 离线地图（按路线下载）
│   ├── 实时导航（轨迹跟随/偏航提醒/语音播报）
│   ├── 路口指引（关键节点图片）
│   └── 安全功能（行程分享/SOS）
├── 记录（M2开放）
│   ├── 轨迹记录（GPS/暂停/结束）
│   ├── 照片标记（地点关联）
│   └── 数据回顾（里程/时长/海拔）
├── 社区（M2开放）
│   ├── 动态流（推荐/附近）
│   ├── 内容发布（图文/轨迹/一键生成）
│   └── 互动（点赞/评论/收藏）
└── 我的
    ├── 个人主页（简化版）
    ├── 收藏路线
    ├── 下载离线包
    └── 紧急联系人设置
```

### 2.2 技术架构（简述）

| 层 | 技术 |
|----|------|
| 客户端 | Flutter（双端一套） |
| 后端 | Node.js + PostgreSQL + Redis |
| 地图 | **高德SDK**（阿里系，国内优先）+ 北斗/GPS双模 |
| 存储 | OSS（图片/轨迹文件） |
| 推送 | 极光推送 |

---

## 3. 核心功能详细设计

### 3.1 发现模块

#### 3.1.1 首页推荐（M1简化版）
| 元素 | 说明 |
|------|------|
| **离我最近** | 基于当前位置，显示附近路线 |
| **编辑精选** | 3-5条高质量路线，大图卡片 |
| **新手推荐** | 标注"新手友好"的路线 |

#### 3.1.2 路线搜索（M1简化版）
| 筛选维度 | 选项 |
|----------|------|
| 位置 | 城市/距离我（5km/10km/20km/50km） |
| 难度 | 休闲/轻度/进阶 |
| 标签 | 亲子/宠物/摄影（M2增加更多） |

#### 3.1.3 路线详情页
| 区块 | 内容 |
|------|------|
| **头图** | 3-5张高清风景图，轮播 |
| **基础信息** | 距离/时长/爬升/难度标签 |
| **安全信息** | 女性友好度/信号覆盖/紧急下撤点 |
| **简介** | 路线亮点、适合人群、注意事项 |
| **轨迹预览** | 地图+海拔剖面图 |
| **关键点** | POI列表（起点/观景点/卫生间/补给点/终点） |
| **操作** | 下载离线包/开始导航/分享行程/收藏 |

---

### 3.2 导航模块（核心）

#### 3.2.1 离线地图（M1核心）
| 功能 | 说明 |
|------|------|
| **地图服务** | 高德SDK |
| **下载策略** | 按路线周边500m下载，14-15级精度 |
| **数据大小** | 5-20MB/路线 |
| **存储管理** | 自动清理30天未用离线包 |

#### 3.2.2 实时导航（M1核心）
| 功能 | 说明 |
|------|------|
| **轨迹跟随** | GPS点匹配到路线，显示在地图上 |
| **偏航检测** | 偏离路线>30m提醒，>50m重新规划 |
| **方向指引** | 箭头+文字"向前/左转/右转" |
| **语音播报** | 关键路口提前50m播报 |
| **进度显示** | 已走/剩余距离、当前海拔、预计到达时间 |

#### 3.2.3 路口指引（差异化）
| 功能 | 说明 |
|------|------|
| **关键节点** | 预标注易错路口、分岔点 |
| **图片对比** | 实景照片vs用户视角对比 |
| **AR指引** | M3迭代，手机摄像头叠加箭头 |

#### 3.2.4 安全功能（M1新增）
| 功能 | 说明 |
|------|------|
| **行程分享** | 生成带路线信息的分享卡片，可发微信 |
| **安全提醒** | 导航中每30分钟震动提醒查看状态 |
| **SOS** | 一键发送当前位置给紧急联系人 |
| **紧急联系人** | 我的页面设置，导航前提醒确认 |

---

### 3.3 记录模块（M2开放）

#### 3.3.1 轨迹记录
| 功能 | 说明 |
|------|------|
| **开始/暂停/结束** | 明显按钮，防止误操作 |
| **后台记录** | 锁屏/切换App继续记录 |
| **自动保存** | 异常退出自动保存已记录部分 |

#### 3.3.2 数据回顾
| 数据 | 展示 |
|------|------|
| 基础数据 | 里程/时长/平均速度/消耗卡路里 |
| 海拔数据 | 总爬升/最高海拔/海拔剖面图 |
| 照片墙 | 本次拍摄的照片集 |

---

### 3.4 社区模块（M2开放）

#### 3.4.1 动态流
| 类型 | 内容 |
|------|------|
| **推荐** | 算法推荐优质内容 |
| **附近** | 附近用户的公开记录 |

#### 3.4.2 内容发布
| 功能 | 说明 |
|------|------|
| **一键生成** | 自动选图+模板+数据叠加 |
| **手动编辑** | 选图、排序、配文、加标签 |
| **隐私设置** | 公开/仅关注/私密 |

---

### 3.5 我的模块

| 功能 | 说明 |
|------|------|
| **个人主页** | 头像/昵称/历史轨迹数（M1简化） |
| **收藏路线** | 收藏的官方路线 |
| **离线包管理** | 下载/删除 |
| **紧急联系人** | 设置1-3位紧急联系人 |
| **设置** | 账号/通知/关于/帮助 |

---

## 4. 非功能需求

### 4.1 性能
| 指标 | 目标 |
|------|------|
| 离线地图加载 | <2秒 |
| 导航定位精度 | <10米 |
| 轨迹记录频率 | 每秒1点，后台持续 |
| 冷启动时间 | <3秒 |

### 4.2 可靠性
| 场景 | 要求 |
|------|------|
| 无网络环境 | 离线功能完全可用 |
| 弱GPS信号 | 惯导补偿，不丢轨迹 |
| 电量低 | 提醒+省电模式 |
| 异常退出 | 自动保存，恢复提示 |

### 4.3 安全
| 功能 | 说明 |
|------|------|
| **紧急联系人** | 预设紧急联系人 |
| **行程分享** | 生成分享卡片，让朋友知道我在哪 |
| **SOS** | 一键发送位置给紧急联系人 |
| **女性友好标识** | 路线标注是否适合女性独行 |

### 4.4 定位优化（北斗+GPS双模）
| 功能 | 说明 |
|------|------|
| **双模检测** | 启动时检测手机北斗+GPS支持 |
| **智能切换** | 支持双模则启用双模融合 |
| **精度优化** | 密林/峡谷场景专项优化 |
| **品牌话术** | "北斗+GPS双模，专为国内山野优化" |

---

## 5. 里程碑规划（已调整）

### Milestone 1: MVP（10-12周）
| 模块 | 功能范围 |
|------|----------|
| 发现 | 路线列表、详情、基础筛选（地点/距离） |
| 导航 | **轨迹跟随**、偏航提醒、语音播报、行程分享 |
| 离线 | 按路线下载离线地图 |
| 安全 | 紧急联系人、SOS、行程分享卡片 |
| 用户 | 微信登录（仅登录，不做注册） |
| 数据 | **10条杭州精品路线**（运营录入） |

**产出**: 可内测Demo，验证核心价值

### Milestone 2: 记录+社区（6-8周）
| 模块 | 功能范围 |
|------|----------|
| 记录 | 轨迹记录、数据回顾、照片标记 |
| 社区 | 动态流、发布、互动、一键生成分享图 |
| 用户 | 手机号绑定、完整个人中心 |
| 后台 | 运营后台支持路线采集（录制模式） |
| 数据 | 扩展至50条路线，开放UGC审核 |

**产出**: 可公测版本

### Milestone 3: 规模化（6-8周）
| 模块 | 功能范围 |
|------|----------|
| 导航 | 路口AR指引、智能路线推荐 |
| 社区 | 关注系统、话题标签、活动功能 |
| 商业化 | 会员功能、装备推荐 |

**产出**: V1.0正式版

---

## 6. 待决策事项

| 事项 | 选项 | 建议 |
|------|------|------|
| 技术栈 | React Native vs Flutter | **Flutter**（已确定） |
| 首发平台 | iOS vs Android vs 双端 | **Android**（MVP方便测试） |
| 路线数据 | 自采 vs UGC vs 合作 | **M1自采10条，M2开放UGC** |
| 安全功能 | M1做不做 | **必须做**，女性用户刚需 |

## 7. 已确定事项

| 事项 | 决策 | 理由 |
|------|------|------|
| 地图服务 | **高德SDK** | 阿里系便于沟通，国内数据准，支持北斗双模 |
| 离线策略 | 按路线周边500m下载 | 精准省空间，5-20MB/条 |
| 录制模式 | MVP不做，M2运营后台支持 | 先验证跟走核心体验 |
| 公司注册 | 杭州 | 阿里资源，诗意品牌调性 |
| 技术栈 | **Flutter** | 双端一套，性能优先 |
| 首发平台 | **Android** | MVP方便安装测试 |
| 后端技术 | **Node.js** | MVP够用，开发快 |
| 用户系统 | **微信登录优先** | 便捷+留存，M2再诱导绑定手机号 |
| 分享功能 | **M1行程分享卡片，M2一键生成美图** | 产品自传播核心 |
| M1路线数 | **10条** | 降低风险，聚焦验证 |

---

## 8. 核心原则

> **"安全第一，体验第二，功能第三"** - 女性用户的安心感是留存关键

> **"产品自己会说话"** - 分享功能是自传播关键，必须做好

---

PRD v1.1 更新说明：
1. 细化目标用户画像，强化女性友好定位
2. M1增加安全功能（行程分享、SOS、紧急联系人）
3. M1路线数从50条调整为10条，降低风险
4. M1增加核心导航功能（轨迹跟随、偏航提醒）
5. 里程碑周期调整：M1从8周延长至10-12周
