# 山径APP - 产品需求文档（PRD）

## 1. 产品概述

### 1.1 一句话描述
**城市年轻人的轻度徒步向导** - 发现路线、离线导航、记录分享，让每一次出走都轻松安心。

### 1.2 核心价值主张
| 维度 | 描述 |
|------|------|
| **功能性** | 精准、易用的离线导航，告别迷路焦虑 |
| **情感性** | 诗意、雅致的户外体验，满足"低成本逃离" |
| **社交性** | 一键生成分享内容，让记录和传播零门槛 |

### 1.3 目标用户
- **核心**: 18-35岁城市年轻人，女性占比高
- **场景**: 周末周边2小时车程，5-15公里轻度徒步
- **痛点**: 路线难找、导航不准、分享麻烦

---

## 2. 产品架构

### 2.1 功能模块

```
山径APP
├── 发现
│   ├── 路线推荐（AI/编辑/热门）
│   ├── 路线搜索（地点/难度/时长/标签）
│   └── 路线详情（图文/轨迹/评价）
├── 导航
│   ├── 离线地图（下载/缓存）
│   ├── 实时导航（轨迹跟随/偏航提醒）
│   ├── 路口指引（关键节点图片+语音）
│   └── 进度显示（距离/海拔/预计时间）
├── 记录
│   ├── 轨迹记录（GPS/暂停/结束）
│   ├── 照片标记（地点关联）
│   └── 数据回顾（里程/时长/海拔/消耗）
├── 社区
│   ├── 动态流（关注/推荐）
│   ├── 内容发布（图文/轨迹/一键生成）
│   └── 互动（点赞/评论/收藏）
└── 我的
    ├── 个人主页（轨迹/成就）
    ├── 收藏路线
    ├── 下载离线包
    └── 设置
```

### 2.2 技术架构（简述）

| 层 | 技术 |
|----|------|
| 客户端 | React Native / Flutter（双端一套） |
| 后端 | Node.js / Go + PostgreSQL |
| 地图 | **高德SDK**（阿里系，国内优先）+ 北斗/GPS双模 |
| 存储 | OSS（图片/轨迹文件） |
| 推送 | 极光/友盟 |

---

## 3. 核心功能详细设计

### 3.1 发现模块

#### 3.1.1 首页推荐
| 元素 | 说明 |
|------|------|
| **今日精选** | 编辑精选1条路线，大图卡片 |
| **AI推荐** | 基于位置/历史/偏好，3-5条 |
| **热门榜单** | 本周最热、新晋黑马 |
| **季节限定** | 樱花、红叶、雪景等时令 |

#### 3.1.2 路线搜索
| 筛选维度 | 选项 |
|----------|------|
| 位置 | 城市/区域/距离我 |
| 难度 | 休闲/轻度/进阶 |
| 时长 | 半日/一日/多日 |
| 标签 | 亲子/宠物/摄影/野餐/瀑布等 |

#### 3.1.3 路线详情页
| 区块 | 内容 |
|------|------|
| **头图** | 3-5张高清风景图，轮播 |
| **基础信息** | 距离/时长/爬升/难度标签 |
| **简介** | 路线亮点、适合人群 |
| **轨迹预览** | 地图+海拔剖面图 |
| **关键点** | POI列表（起点/观景点/补给点/终点） |
| **评价** | 用户评分、文字评价、最新照片 |
| **操作** | 下载离线包/开始导航/收藏/分享 |

---

### 3.2 导航模块（核心）

### 3.2.1 离线地图（高德SDK）
| 功能 | 说明 |
|------|------|
| **地图服务** | 高德SDK（阿里系，便于沟通） |
| **下载策略** | 按路线周边500m下载，14-15级精度 |
| **数据大小** | 5-20MB/路线，精准省空间 |
| **自动缓存** | 浏览过的路线自动缓存 |
| **存储清理** | 过期/未用离线包清理 |

#### 3.2.2 导航模式区分

**跟走模式（普通用户）**
| 功能 | 说明 |
|------|------|
| **目的** | 跟着路线走，不迷路 |
| **GPS频率** | 每5秒1点（省电） |
| **POI标记** | 只读已有POI，不新增 |
| **数据量** | 小（仅自身轨迹） |
| **电量消耗** | 低（智能采样） |

**录制模式（运营/领队）- MVP后开放**
| 功能 | 说明 |
|------|------|
| **目的** | 采集路线数据，完善信息 |
| **GPS频率** | 每秒1点（高精度） |
| **POI标记** | 一键标记8种类型（起点/终点/路口/观景点/卫生间/补给点/危险点/休息点） |
| **照片关联** | 拍照自动关联当前POI |
| **语音备注** | 路口说明、注意事项语音记录 |
| **数据量** | 大（完整轨迹+POI+照片） |

#### 3.2.2 实时导航
| 功能 | 说明 |
|------|------|
| **轨迹跟随** | GPS点匹配到路线，显示在地图上 |
| **偏航检测** | 偏离路线>50m提醒 |
| **方向指引** | 箭头+文字"向前/左转/右转" |
| **语音播报** | 关键路口提前50m播报 |

#### 3.2.3 路口指引（差异化功能）
| 功能 | 说明 |
|------|------|
| **关键节点** | 预标注易错路口、分岔点 |
| **图片对比** | 实景照片vs用户视角对比 |
| **AR指引** | 后期迭代，手机摄像头叠加箭头 |

#### 3.2.4 进度显示
| 数据 | 展示方式 |
|------|----------|
| 已走/剩余距离 | 大数字+进度条 |
| 当前海拔 | 数字+实时剖面图 |
| 预计到达时间 | 基于当前速度计算 |
| 下一个POI | 距离+名称+类型图标 |

---

### 3.3 记录模块

#### 3.3.1 轨迹记录
| 功能 | 说明 |
|------|------|
| **开始/暂停/结束** | 明显按钮，防止误操作 |
| **后台记录** | 锁屏/切换App继续记录 |
| **自动保存** | 异常退出自动保存已记录部分 |

#### 3.3.2 照片标记
| 功能 | 说明 |
|------|------|
| **拍照关联** | 拍照自动标记GPS位置 |
| **相册导入** | 事后导入照片，匹配时间/位置 |
| **照片地图** | 轨迹上显示照片标记点 |

#### 3.3.3 数据回顾
| 数据 | 展示 |
|------|------|
| 基础数据 | 里程/时长/平均速度/消耗卡路里 |
| 海拔数据 | 总爬升/最高海拔/海拔剖面图 |
| 时间轴 | 起点→各POI→终点的时间线 |
| 照片墙 | 本次拍摄的照片集 |

---

### 3.4 社区模块

#### 3.4.1 动态流
| 类型 | 内容 |
|------|------|
| **关注** | 关注用户的最新动态 |
| **推荐** | 算法推荐优质内容 |
| **附近** | 附近用户的公开记录 |

#### 3.4.2 内容发布
| 功能 | 说明 |
|------|------|
| **一键生成** | 自动选图+模板+数据叠加 |
| **手动编辑** | 选图、排序、配文、加标签 |
| **隐私设置** | 公开/仅关注/私密 |

#### 3.4.3 互动
| 功能 | 说明 |
|------|------|
| **点赞** | 简单反馈 |
| **评论** | 文字评论 |
| **收藏** | 收藏他人路线/动态 |
| **分享** | 生成分享图/链接，跳转微信/小红书 |

---

### 3.5 我的模块

| 功能 | 说明 |
|------|------|
| **个人主页** | 头像/昵称/简介/成就徽章/轨迹统计 |
| **我的轨迹** | 历史记录列表，可查看详情 |
| **收藏路线** | 收藏的官方/用户路线 |
| **离线包管理** | 下载/删除/更新 |
| **设置** | 账号/通知/隐私/关于/帮助 |

---

## 4. 非功能需求

### 4.1 性能
| 指标 | 目标 |
|------|------|
| 离线地图加载 | <2秒 |
| 导航定位精度 | <10米 |
| 轨迹记录频率 | 每秒1点，后台持续 |
| 冷启动时间 | <3秒 |

### 4.2 可靠性
| 场景 | 要求 |
|------|------|
| 无网络环境 | 离线功能完全可用 |
| 弱GPS信号 | 惯导补偿，不丢轨迹 |
| 电量低 | 提醒+省电模式 |
| 异常退出 | 自动保存，恢复提示 |

### 4.3 安全
| 功能 | 说明 |
|------|------|
| **紧急联系人** | 预设紧急联系人 |
| **位置共享** | 实时共享位置给好友 |
| **SOS** | 一键发送位置给紧急联系人 |

### 4.4 定位优化（北斗+GPS双模）
| 功能 | 说明 |
|------|------|
| **双模检测** | 启动时检测手机北斗+GPS支持 |
| **智能切换** | 支持双模则启用双模融合，否则单模 |
| **精度优化** | 密林/峡谷场景专项优化 |
| **品牌话术** | "北斗+GPS双模，专为国内山野优化" |

---

## 5. 里程碑规划

### Milestone 1: MVP（2-3月）
| 模块 | 功能范围 |
|------|----------|
| 发现 | 路线列表、详情、基础搜索 |
| 导航 | **跟走模式**：离线地图、轨迹跟随、基础定位（不做录制模式） |
| 用户 | 注册登录、个人中心 |
| 数据 | 50条精品路线（运营后台录入） |

**产出**: 可内测Demo

### Milestone 2: 导航核心（2-3月）
| 模块 | 功能范围 |
|------|----------|
| 导航 | 轨迹跟随、偏航提醒、语音播报、路口指引 |
| 记录 | 轨迹记录、数据回顾 |
| 后台 | **录制模式**：运营后台支持路线采集 |

**产出**: 可公测

### Milestone 3: 社区闭环（2-3月）
| 模块 | 功能范围 |
|------|----------|
| 社区 | 动态流、发布、互动 |
| 记录 | 照片标记、数据回顾 |
| 分享 | 一键生成分享图 |

**产出**: V1.0正式版

### Milestone 4: 商业化（2-3月）
| 模块 | 功能范围 |
|------|----------|
| 会员 | 高级功能、去广告 |
| 装备 | 装备推荐、affiliate |
| 活动 | 线下活动、领队系统 |

**产出**: 收入模型验证

---

## 6. 待决策事项

| 事项 | 选项 | 建议 |
|------|------|------|
| 技术栈 | React Native vs Flutter | Flutter性能更好，RN生态更大 |
| 首发平台 | iOS vs Android vs 双端 | 建议iOS首发，用户质量高 |
| 路线数据 | 自采 vs UGC vs 合作 | MVP自采，后续UGC+合作 |

## 7. 已确定事项

| 事项 | 决策 | 理由 |
|------|------|------|
| 地图服务 | **高德SDK** | 阿里系便于沟通，国内数据准，支持北斗双模 |
| 离线策略 | 按路线周边500m下载 | 精准省空间，5-20MB/条 |
| 录制模式 | MVP不做，M2运营后台支持 | 先验证跟走核心体验 |
| 公司注册 | 杭州 | 阿里资源，诗意品牌调性 |
| 技术栈 | **Flutter** | 双端一套，性能优先 |
| 首发平台 | **Android** | MVP方便安装测试 |
| 后端技术 | **Node.js** | MVP够用，开发快，真到10万并发时有钱重构 |
| 用户系统 | **微信登录优先，诱导绑定手机号** | 便捷+留存，不强制但让用户愿意绑 |
| 分享功能 | **M1长图，M2视频，平台深度适配** | 产品自传播核心，做不好浪费推广费 |
| 数据打底 | **OSM+高德融合** | 1-2周硅力，有底图能导航，运营自采补小路 |

---

## 8. 核心原则

> **"产品自己会说话"** - 分享功能是自传播关键，必须做好。

---

PRD初版完成，你审阅，我迭代。