# 路线模块测试用例

## Q3 补充测试用例

### TC-TRAIL-003: 路线收藏功能

| 项目 | 内容 |
|------|------|
| **API** | `POST /trails/:id/favorite` |
| **功能** | 路线收藏与取消收藏 |
| **前置条件** | 用户已登录 |
| **测试步骤** | 1. 调用 POST /trails/:id/favorite 收藏路线<br>2. 验证响应成功<br>3. 再次调用取消收藏 |
| **预期结果** | 1. 收藏成功：返回 200<br>2. 取消收藏成功：返回 200 |
| **优先级** | P1 |

### TC-TRAIL-003-1: 重复收藏同一路线（异常场景）

| 项目 | 内容 |
|------|------|
| **API** | `POST /trails/:id/favorite` |
| **功能** | 重复收藏异常处理 |
| **前置条件** | 用户已登录，路线已收藏 |
| **测试步骤** | 1. 调用 POST /trails/:id/favorite 收藏已收藏路线 |
| **预期结果** | 提示"已收藏该路线" |
| **优先级** | P2 |

### TC-TRAIL-003-2: 未登录拦截（401）

| 项目 | 内容 |
|------|------|
| **API** | `POST /trails/:id/favorite` |
| **功能** | 未登录用户调用收藏接口 |
| **前置条件** | 用户未登录 |
| **测试步骤** | 1. 未登录状态下调用 POST /trails/:id/favorite |
| **预期结果** | 返回 401，提示"请先登录" |
| **优先级** | P1 |

### TC-TRAIL-003-3: 收藏不存在的路线（404）

| 项目 | 内容 |
|------|------|
| **API** | `POST /trails/:id/favorite` |
| **功能** | 收藏不存在的路线 |
| **前置条件** | 用户已登录 |
| **测试步骤** | 1. 调用 POST /trails/:id/favorite，id 使用不存在的路线ID |
| **预期结果** | 返回 404，提示"路线不存在" |
| **优先级** | P1 |

### TC-TRAIL-003-4: 未登录状态下尝试收藏

| 项目 | 内容 |
|------|------|
| **API** | `POST /trails/:id/favorite` |
| **功能** | 未登录用户调用收藏接口 |
| **前置条件** | 用户未登录 |
| **测试步骤** | 1. 未登录状态下调用 POST /trails/:id/favorite |
| **预期结果** | 返回 401，提示"请先登录" |
| **优先级** | P1 |

### TC-TRAIL-003-5: Token过期处理

| 项目 | 内容 |
|------|------|
| **API** | `POST /trails/:id/favorite` |
| **功能** | 使用过期Token调用收藏接口 |
| **前置条件** | Token已过期 |
| **测试步骤** | 1. 使用过期Token调用 POST /trails/:id/favorite |
| **预期结果** | 返回 401，提示"登录已过期，请重新登录" |
| **优先级** | P1 |
