# P8 边界场景文档 - 网络错误处理

## 场景：网络错误处理（超时、断网、弱网）

### 场景描述
用户在使用 P8 功能时，因网络问题导致请求失败。

### 触发条件
| 类型 | 触发条件 |
|------|----------|
| 超时 | 请求超过 10 秒无响应 |
| 断网 | 设备完全无网络连接 |
| 弱网 | 网络信号弱，请求频繁失败 |

### 用户提示文案

#### 1. 超时
```
连接有点慢，再试一次？
```

#### 2. 断网
```
网络连接失败，请检查网络设置
```

#### 3. 弱网
```
网络不稳定，正在尝试恢复...
```

### 重试机制

| 参数 | 值 |
|------|-----|
| 最大重试次数 | 3 次 |
| 重试间隔 | 2s → 4s → 8s（指数退避） |
| 重试条件 | 仅网络类错误（5xx、超时） |
| 不重试条件 | 4xx 客户端错误 |

### 处理流程

```
请求失败
    ↓
判断错误类型
    ↓
├─ 网络错误 ──→ 自动重试（最多3次）
│                ↓
│           重试成功 ──→ 正常返回
│                ↓
│           重试耗尽 ──→ 显示错误提示 + 手动重试按钮
│
└─ 客户端错误 ──→ 直接报错，不重试
```

### 手动重试
- 重试失败后显示「重新加载」按钮
- 用户点击后立即重试
- 重置重试计数器

## 视觉规范：Toast 组件

网络错误提示使用 Toast 组件：

| 属性 | 规范 |
|------|------|
| 位置 | 屏幕顶部居中 |
| 持续时间 | 3 秒 |
| 内容 | 图标 + 文案 + 重试按钮 |

---
*文档版本：v1.0*
