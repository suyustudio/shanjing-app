# 山径APP - Milestone 1 详细任务拆分（v1.2）

> **文档版本**: v1.2  
> **最后更新**: 2026-02-27  
> **文档状态**: 评审完成  
> **基于版本**: v1.1 优化  
> **项目周期**: 10-12周  
> **目标交付**: Android内测版 + 10条精品路线

---

## 1. 项目概览

### 1.1 项目目标
交付可内测的MVP，验证核心价值：**离线导航让徒步不迷路**

### 1.2 关键成功指标（KPIs）

| 指标 | 目标值 | 测量方式 |
|------|--------|----------|
| 导航准确率 | > 95% | 实地测试，轨迹匹配度 |
| 用户完成率 | > 70% | 30名种子用户中完成徒步的比例 |
| 功能可用性 | 100% | 安全功能（SOS、行程分享）零故障 |
| 用户满意度 | NPS > 50 | 内测后问卷调查 |

### 1.3 团队配置

| 角色 | 人数 | 职责 |
|------|------|------|
| 产品经理 | 1 | 需求定义、原型设计、项目管理 |
| 后端工程师 | 1 | API开发、数据库、后台系统 |
| 移动端工程师 | 1 | Flutter APP开发 |
| 运营/数据 | 1 | 路线采集、内容准备 |

### 1.4 任务总览

| 阶段 | 任务数 | 周期 | 关键产出 |
|------|--------|------|----------|
| Phase 1: 产品定义 | 5 | Week 1-2 | PRD、原型、设计稿 |
| Phase 2: 技术验证 | 2 | Week 2 | 技术报告、风险评估 |
| Phase 3: 后端开发 | 8 | Week 2-6 | API服务、后台系统 |
| Phase 4: 移动端开发 | 10 | Week 3-10 | Android APP |
| Phase 5: 数据准备 | 3 | Week 1-8 | 10条精品路线 |
| Phase 6: 测试上线 | 5 | Week 11-12 | 内测版本、测试报告 |

**总计**: 33个任务，10-12周交付

---

## 2. Phase 1: 产品定义（Week 1-2）

### 2.1 任务清单

| ID | 任务 | 输出物 | 工期 | 负责人 | 依赖 | 优先级 |
|----|------|--------|------|--------|------|--------|
| P1 | 竞品分析深度报告 | Markdown文档 | 3天 | PM | - | P0 |
| P2 | 用户流程图（含安全场景） | 流程图 | 2天 | PM | P1 | P0 |
| P3 | 信息架构设计 | 架构图 | 2天 | PM | P2 | P0 |
| P4 | 交互原型（低保真） | Figma原型 | 5天 | PM | P3 | P0 |
| P5 | UI视觉设计（高保真） | 设计稿 | 5天 | 设计师 | P4 | P0 |

### 2.2 验收标准

- [ ] P1: 分析至少3个竞品，输出优劣势对比表
- [ ] P2: 覆盖核心用户旅程：发现→下载→导航→完成
- [ ] P3: 明确所有页面层级和跳转关系
- [ ] P4: 可点击交互原型，覆盖所有M1功能
- [ ] P5: 设计系统（颜色、字体、组件）定义完成

### 2.3 风险与应对

| 风险 | 概率 | 影响 | 应对措施 |
|------|------|------|----------|
| 设计资源不足 | 中 | 高 | 提前联系外包设计师备选 |
| 需求频繁变更 | 中 | 中 | Week 2冻结需求，变更进M2 |

---

## 3. Phase 2: 技术验证（Week 2）⚠️ 关键阶段

### 3.1 任务清单

| ID | 任务 | 输出物 | 工期 | 负责人 | 依赖 | 优先级 |
|----|------|--------|------|--------|------|--------|
| V1 | 高德SDK离线导航验证 | 技术报告 | 3天 | 移动端 | - | P0 |
| V2 | Flutter后台GPS保活测试 | 技术报告 | 2天 | 移动端 | V1 | P0 |

### 3.2 验证内容清单

**V1: 高德SDK离线导航验证**
- [ ] 离线地图下载功能正常
- [ ] 无网络环境下地图可正常显示
- [ ] 轨迹跟随功能准确
- [ ] 定位精度达到<10米
- [ ] 地图数据大小符合预期（5-20MB/路线）

**V2: Flutter后台GPS保活测试**
- [ ] 后台持续记录GPS不中断
- [ ] 锁屏状态下继续工作
- [ ] 不同品牌手机兼容性测试（华为/小米/OPPO/vivo）
- [ ] 电量消耗可接受（1小时<10%）

### 3.3 关键决策点

> **Week 2结束时必须决策**: 如果高德SDK不满足需求，切换至Mapbox或自研方案

| 方案 | 优点 | 缺点 | 决策条件 |
|------|------|------|----------|
| 高德SDK | 国内数据准，阿里资源 | 离线功能可能受限 | 验证通过则首选 |
| Mapbox | 离线功能强，国际通用 | 国内数据一般，需翻墙 | 高德不满足时备选 |
| 自研 | 完全可控 | 工作量大，风险高 | 不推荐M1采用 |

### 3.4 风险与应对

| 风险 | 概率 | 影响 | 应对措施 |
|------|------|------|----------|
| 高德SDK离线功能不完善 | 中 | **极高** | Week 2验证，预留Mapbox备选 |
| GPS后台保活问题 | 中 | 高 | 提前测试，调研成熟方案（如百度定位SDK） |

---

## 4. Phase 3: 后端开发（Week 2-6）

### 4.1 任务清单

| ID | 任务 | 输出物 | 工期 | 负责人 | 依赖 | 优先级 |
|----|------|--------|------|--------|------|--------|
| B1 | 技术选型+架构设计 | 技术文档 | 2天 | 后端 | P1 | P0 |
| B2 | 数据库设计+建模 | ER图+SQL | 2天 | 后端 | B1 | P0 |
| B3 | 微信登录API | 登录/用户信息接口 | 3天 | 后端 | B2 | P0 |
| B4 | 路线数据API | CRUD/筛选接口 | 4天 | 后端 | B2 | P0 |
| B5 | 文件存储服务 | 图片上传下载接口 | 2天 | 后端 | B1 | P1 |
| B6 | 紧急联系人API | 增删改查接口 | 2天 | 后端 | B3 | P0 |
| B7 | 后台管理系统 | 路线/用户管理界面 | 5天 | 后端 | B3,B4 | P1 |
| B8 | API文档+单元测试 | Swagger文档 | 2天 | 后端 | B3-B7 | P1 |

### 4.2 关键路径

```
B1 → B2 → B4 → B7
     ↓
    B3 → B6
```

### 4.3 数据库核心表结构

```sql
-- 用户表
users
- id (PK)
- wx_openid (微信openid)
- nickname
- avatar_url
- phone (nullable)
- emergency_contacts (JSON)
- created_at

-- 路线表
trails
- id (PK)
- name
- description
- distance_km
- duration_min
- elevation_gain_m
- difficulty (enum: easy/moderate/hard)
- tags (JSON array)
- safety_info (JSON)
- cover_images (JSON array)
- gpx_data (text)
- poi_data (JSON)
- is_published
- created_at

-- 离线包表
offline_packages
- id (PK)
- trail_id (FK)
- file_url
- file_size_mb
- min_zoom
- max_zoom
- created_at

-- 用户收藏表
user_favorites
- id (PK)
- user_id (FK)
- trail_id (FK)
- created_at
```

### 4.4 API接口清单

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 微信登录 | POST | /api/auth/wechat | 微信code换token |
| 获取用户信息 | GET | /api/users/me | 获取当前用户信息 |
| 更新紧急联系人 | PUT | /api/users/emergency | 更新紧急联系人 |
| 路线列表 | GET | /api/trails | 支持筛选、分页 |
| 路线详情 | GET | /api/trails/:id | 获取路线完整信息 |
| 下载离线包 | GET | /api/trails/:id/offline | 获取离线包下载链接 |
| 收藏路线 | POST | /api/trails/:id/favorite | 收藏/取消收藏 |

---

## 5. Phase 4: 移动端开发（Week 3-10）

### 5.1 任务清单

| ID | 任务 | 输出物 | 工期 | 负责人 | 依赖 | 优先级 |
|----|------|--------|------|--------|------|--------|
| M1 | 项目搭建+架构 | 代码框架 | 2天 | 移动端 | B1,V1 | P0 |
| M2 | 公共组件库 | UI组件 | 3天 | 移动端 | M1 | P0 |
| M3 | 微信登录模块 | 登录/用户信息 | 3天 | 移动端 | B3,M2 | P0 |
| M4 | 发现模块-列表 | 路线列表/筛选 | 4天 | 移动端 | B4,M2 | P0 |
| M5 | 发现模块-详情 | 路线详情页 | 4天 | 移动端 | M4 | P0 |
| M6 | 地图集成 | 地图显示/定位 | 5天 | 移动端 | V1,M2 | P0 |
| M7 | 离线地图 | 下载/缓存/显示 | 5天 | 移动端 | M6 | P0 |
| M8 | **导航模块-核心** | 轨迹跟随/偏航/语音 | **8天** | 移动端 | M6,M7 | P0 |
| M9 | 安全功能 | SOS/行程分享/紧急联系人 | 4天 | 移动端 | M3,M8 | P0 |
| M10 | 整合测试+Bug修复 | 稳定版本 | 4天 | 移动端 | M3-M9 | P0 |

### 5.2 关键路径

```
M1 → M6 → M7 → M8 → M10
 ↓
M2 → M3 → M9 ↗
 ↓
M4 → M5 ↗
```

### 5.3 M8 导航模块详细拆分（8天）

| 子任务 | 工期 | 验收标准 |
|--------|------|----------|
| M8.1 轨迹跟随算法 | 3天 | GPS点实时匹配到路线，误差<10米 |
| M8.2 偏航检测与提醒 | 2天 | >30m提醒，>50m提示重新规划 |
| M8.3 语音播报系统 | 1天 | 关键路口提前50m播报 |
| M8.4 进度显示UI | 1天 | 距离/海拔/ETA实时更新 |
| M8.5 联调测试 | 1天 | 完整导航流程测试通过 |

### 5.4 技术架构

```
lib/
├── main.dart
├── app.dart
├── config/                 # 配置
│   ├── constants.dart
│   └── routes.dart
├── models/                 # 数据模型
│   ├── user.dart
│   ├── trail.dart
│   └── poi.dart
├── services/               # 服务层
│   ├── api_service.dart
│   ├── auth_service.dart
│   ├── location_service.dart
│   ├── map_service.dart
│   └── navigation_service.dart
├── providers/              # 状态管理
│   ├── auth_provider.dart
│   ├── trail_provider.dart
│   └── navigation_provider.dart
├── screens/                # 页面
│   ├── splash/
│   ├── login/
│   ├── discovery/
│   ├── trail_detail/
│   ├── navigation/
│   ├── profile/
│   └── settings/
├── widgets/                # 公共组件
│   ├── common/
│   ├── map/
│   └── navigation/
└── utils/                  # 工具
    ├── gps_utils.dart
    ├── storage_utils.dart
    └── permission_utils.dart
```

---

## 6. Phase 5: 数据准备（Week 1-8）

### 6.1 任务清单

| ID | 任务 | 输出物 | 工期 | 负责人 | 依赖 | 优先级 |
|----|------|--------|------|--------|------|--------|
| D1 | 路线筛选清单 | 20条候选路线 | 3天 | 运营 | - | P0 |
| D2 | 数据获取与整理 | 10条路线数据 | 2周 | 运营 | D1 | P0 |
| D3 | 数据入库 | 10条完整数据 | 1周 | 运营 | D2,B4 | P0 |

### 6.2 数据来源方案

| 来源 | 数量 | 方式 | 合规要求 |
|------|------|------|----------|
| 两步路公开轨迹 | 3-4条 | 合规使用，标注来源 | 仅使用公开数据 |
| 本地户外俱乐部 | 3-4条 | 授权使用协议 | 签署授权书 |
| 团队亲自踩线 | 3-5条 | 自主采集 | 原创，质量最高 |

### 6.3 路线数据标准

每条路线必须包含：
- [ ] 基础信息：名称、距离、时长、爬升、难度
- [ ] 头图：3-5张高清风景照
- [ ] 轨迹数据：GPX格式
- [ ] POI标注：起点、终点、观景点、卫生间、补给点
- [ ] 安全信息：女性友好度、信号覆盖、紧急下撤点
- [ ] 文字描述：简介、亮点、注意事项

### 6.4 风险与应对

| 风险 | 概率 | 影响 | 应对措施 |
|------|------|------|----------|
| 数据获取困难 | 中 | 高 | 提前联系俱乐部，准备备选路线 |
| 数据质量不达标 | 中 | 中 | 制定详细数据标准，D2阶段验收 |

---

## 7. Phase 6: 测试上线（Week 11-12）

### 7.1 任务清单

| ID | 任务 | 输出物 | 工期 | 负责人 | 依赖 | 优先级 |
|----|------|--------|------|--------|------|--------|
| T1 | 功能测试 | 测试报告 | 3天 | 全员 | M10,B8 | P0 |
| T2 | 性能测试 | 测试报告 | 2天 | 移动端 | M10 | P0 |
| T3 | 实地导航测试 | 测试报告 | 3天 | 全员 | T1 | P0 |
| T4 | 内测邀请 | 30个种子用户 | 3天 | PM | T1,T2 | P1 |
| T5 | 上线准备 | 应用商店材料 | 2天 | PM | T3 | P1 |

### 7.2 测试用例清单

**功能测试（T1）**
- [ ] 用户注册/登录流程
- [ ] 路线浏览、搜索、筛选
- [ ] 离线包下载与删除
- [ ] 离线地图显示
- [ ] 导航开始/暂停/结束
- [ ] 轨迹跟随准确性
- [ ] 偏航提醒功能
- [ ] 语音播报功能
- [ ] 紧急联系人设置
- [ ] SOS功能
- [ ] 行程分享功能

**性能测试（T2）**
- [ ] 冷启动时间 < 3秒
- [ ] 离线地图加载 < 2秒
- [ ] 导航定位精度 < 10米
- [ ] 电量消耗（1小时导航<15%）
- [ ] 内存占用监控

**实地测试（T3）**
- [ ] 至少测试3条不同难度路线
- [ ] 测试场景：正常导航、偏航、无信号、电量低
- [ ] 测试人员：团队+5名种子用户
- [ ] 记录问题并修复

### 7.3 内测用户招募

**目标**: 30名种子用户
**渠道**:
- 朋友圈/微信群（10人）
- 小红书户外社群（10人）
- 本地户外俱乐部（10人）

**筛选标准**:
- 25-35岁，女性优先
- 有徒步经验
- 愿意提供详细反馈
- 使用Android手机

---

## 8. 甘特图

```
Week    1    2    3    4    5    6    7    8    9   10   11   12
        ├────┼────┼────┼────┼────┼────┼────┼────┼────┼────┼────┤
        
Phase 1: 产品定义
设计    [P1-P5]        
        
Phase 2: 技术验证
验证         [V1-V2]
        
Phase 3: 后端开发
后端         [B1-B8]              
        
Phase 4: 移动端开发
移动              [M1-M10]
                      ↑关键路径
        
Phase 5: 数据准备
数据    [D1-D3]              
        
Phase 6: 测试上线
测试                                          [T1-T5]
```

---

## 9. 风险管理

### 9.1 风险矩阵

| 风险 | 概率 | 影响 | 风险等级 | 应对措施 | 责任人 |
|------|------|------|----------|----------|--------|
| 高德SDK不满足离线导航 | 中 | 极高 | 🔴 高 | Week 2技术验证，预留Mapbox备选 | 移动端 |
| GPS后台保活问题 | 中 | 高 | 🟠 中高 | 提前测试，调研成熟方案 | 移动端 |
| 导航精度不达标 | 中 | 高 | 🟠 中高 | M8预留缓冲时间，实地测试 | 移动端 |
| 数据采集延迟 | 低 | 中 | 🟡 中 | 从50条减至10条，专注杭州 | 运营 |
| 人员变动/不足 | 低 | 高 | 🟠 中高 | 预留2周缓冲时间 | PM |
| 需求变更 | 中 | 中 | 🟡 中 | Week 2冻结需求，变更进M2 | PM |

### 9.2 应急预案

**情景1: 高德SDK离线功能不完善**
- 触发条件: Week 2验证未通过
- 应对措施: 
  1. 评估Mapbox切换成本（3-5天）
  2. 如成本过高，调整M1范围：先做在线导航，M2做离线
  3. 通知所有干系人，调整预期

**情景2: 关键人员缺席**
- 触发条件: 任意核心人员缺席>1周
- 应对措施:
  1. 评估任务重新分配
  2. 必要时外包部分工作
  3. 调整交付时间

---

## 10. 沟通计划

| 会议 | 频率 | 参与人 | 内容 |
|------|------|--------|------|
| 站会 | 每日 | 全员 | 昨日完成/今日计划/阻塞问题 |
| 周会 | 每周五 | 全员 | 本周进度/下周计划/风险更新 |
| 里程碑评审 | 每阶段结束 | 全员 | 阶段成果验收/Go-NoGo决策 |

---

## 11. 交付物清单

| 类型 | 交付物 | 负责人 | 截止时间 |
|------|--------|--------|----------|
| 产品 | PRD文档 | PM | Week 2 |
| 产品 | 设计稿+原型 | PM/设计师 | Week 2 |
| 技术 | 技术架构文档 | 后端/移动端 | Week 2 |
| 技术 | API文档（Swagger） | 后端 | Week 6 |
| 移动 | Android APP（MVP版） | 移动端 | Week 10 |
| 数据 | 10条精品路线数据 | 运营 | Week 8 |
| 测试 | 功能测试报告 | 全员 | Week 11 |
| 测试 | 性能测试报告 | 移动端 | Week 11 |
| 测试 | 实地测试报告 | 全员 | Week 11 |
| 运营 | 内测用户反馈汇总 | PM | Week 12 |
| 运营 | 应用商店材料 | PM | Week 12 |

---

## 12. 更新日志

| 版本 | 日期 | 变更内容 |
|------|------|----------|
| v1.0 | - | 初版任务拆分 |
| v1.1 | - | 增加技术验证阶段，调整周期为10-12周，M1路线数50→10 |
| v1.2 | 2026-02-27 | 按项目管理技能规范重构，增加Phase划分、KPIs、风险矩阵、沟通计划 |

---

> **"计划的价值在于规划过程，而非计划本身"** - 保持灵活，聚焦核心价值验证
