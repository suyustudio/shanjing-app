# 高德离线地图分层策略

## 高德离线地图能力

| 层级 | 级别范围 | 内容 | 大小 |
|------|----------|------|------|
| **省/直辖市** | 1-8级 | 全国概览、主要城市 | ~100MB |
| **城市** | 9-13级 | 城市道路、POI | ~50-200MB/城市 |
| **区县** | 14-16级 | 详细道路、建筑 | ~20-50MB/区县 |
| **自定义范围** | 指定级别 | 路线周边、自定义区域 | 可控 |

---

## 山径优化策略

### 方案：按路线下载（推荐）

```
下载范围 = 路线轨迹周边 500m
下载级别 = 13-16级（足够徒步导航）
预估大小 = 5-20MB/路线
```

**优势**:
- 极小：只下需要的区域
- 精准：路线周边高清，其他区域忽略
- 快速：下载快，省流量

### 对比：按城市下载

| 方式 | 大小 | 适用 |
|------|------|------|
| 杭州市全量 | ~200MB | 不需要，太多无用区域 |
| 路线周边500m | ~10MB | ✅ 精准，够用 |

---

## 技术实现

### 高德SDK接口

```java
// 自定义下载区域
OfflineMapManager.downloadByDistrictName("西湖区"); // 按区县

// 或自定义范围（推荐）
LatLngBounds bounds = new LatLngBounds(
    new LatLng(swLat, swLng), // 西南角
    new LatLng(neLat, neLng)  // 东北角
);
OfflineMapManager.downloadByBounds(bounds, minLevel, maxLevel);
```

### 山径封装

```
下载流程:
1. 用户选择路线
2. 计算路线边界框(bbox) + 500m缓冲
3. 调用高德下载(level 13-16)
4. 显示下载进度
5. 保存到本地缓存
```

---

## 数据分层建议

| 数据类型 | 级别 | 大小 | 说明 |
|----------|------|------|------|
| **基础道路** | 13级 | 小 | 主要道路、高速 |
| **详细道路** | 14-15级 | 中 | 小路、步道、村庄 |
| **地形细节** | 16级 | 大 | 精确到建筑物 |

**山径只需要**：14-15级（步道级别）

---

## 成本预估

| 场景 | 数据量 | 说明 |
|------|--------|------|
| 单条路线 | 5-20MB | 周边500m，14-15级 |
| 50条路线(MVP) | ~500MB | 用户按需下载 |
| 一个城市(100条) | ~1GB | 热门路线全下 |

**完全可控**。

---

## 结论

高德离线地图支持：
- ✅ 自定义范围下载
- ✅ 分层级别控制
- ✅ 按需精准下载

山径策略：**按路线周边500m下载，14-15级，5-20MB/条**。

既省空间又够用。